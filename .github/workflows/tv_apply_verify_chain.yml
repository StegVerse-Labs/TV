name: TV Apply + Verify (Chained)

on:
  workflow_dispatch: {}
  schedule:
    - cron: "0 6 * * *"   # daily 06:00 UTC

permissions:
  contents: write
  id-token: write

concurrency:
  group: tv-apply-verify-${{ github.ref }}
  cancel-in-progress: false

jobs:
  apply:
    uses: StegVerse/TV/.github/workflows/tv_apply_reusable.yml@main

  verify:
    needs: apply
    uses: StegVerse/TV/.github/workflows/tv_verify_reusable.yml@main
    with:
      export_path: /tmp/tv_export.json
      sign_path:   /tmp/tv_export.sig
      chainlog_path: data/summary/chainlog.jsonl
